---
phase: 05-core-components-advanced
plan: 02
type: execute
wave: 2
depends_on: ['05-01']
files_modified:
  - packages/ui/src/components/tabs.tsx
  - packages/ui/src/components/tabs.figma.tsx
  - apps/storybook/stories/Tabs.stories.tsx
  - packages/ui/src/components/tooltip.tsx
  - packages/ui/src/components/tooltip.figma.tsx
  - apps/storybook/stories/Tooltip.stories.tsx
  - packages/ui/src/components/toast.tsx
  - packages/ui/src/components/toast.figma.tsx
  - apps/storybook/stories/Toast.stories.tsx
autonomous: true

must_haves:
  truths:
    - 'Tabs switch content on click/keyboard with underline indicator on active tab'
    - 'Hidden tab content unmounts from DOM (default Radix behavior, no forceMount)'
    - 'Disabled tab is visually muted and non-interactive'
    - 'Tooltip appears on hover and focus with shared delay via TooltipProvider'
    - 'Toast notifications appear bottom-right with semantic token styling matching design system'
    - 'Toast variants (success, error, warning, info) are visually distinct'
  artifacts:
    - path: 'packages/ui/src/components/tabs.tsx'
      provides: 'Tabs compound component (4 parts)'
      exports: ['Tabs', 'TabsList', 'TabsTrigger', 'TabsContent']
    - path: 'packages/ui/src/components/tooltip.tsx'
      provides: 'Tooltip compound component (5 parts)'
      exports:
        ['Tooltip', 'TooltipTrigger', 'TooltipContent', 'TooltipProvider']
    - path: 'packages/ui/src/components/toast.tsx'
      provides: 'Toaster component (Sonner wrapper)'
      exports: ['Toaster']
    - path: 'apps/storybook/stories/Tabs.stories.tsx'
      provides: 'Tabs stories with autodocs'
    - path: 'apps/storybook/stories/Tooltip.stories.tsx'
      provides: 'Tooltip stories with autodocs'
    - path: 'apps/storybook/stories/Toast.stories.tsx'
      provides: 'Toast stories with autodocs'
  key_links:
    - from: 'tabs.tsx'
      to: '@radix-ui/react-tabs'
      via: 'Radix primitive wrapping'
      pattern: 'TabsPrimitive'
    - from: 'tooltip.tsx'
      to: '@radix-ui/react-tooltip'
      via: 'Radix primitive wrapping'
      pattern: 'TooltipPrimitive'
    - from: 'toast.tsx'
      to: 'sonner'
      via: 'Sonner Toaster wrapping'
      pattern: "import.*from 'sonner'"
---

<objective>
Implement Tabs, Tooltip, and Toast components with Storybook stories and Figma Code Connect mappings.

Purpose: These three components are simpler than DropdownMenu and Form — Tabs and Tooltip follow the established Radix compound component pattern, Toast is a thin Sonner wrapper. Grouping them maximizes throughput.

Output: Three working components, each with stories and Figma Code Connect placeholders.
</objective>

<execution_context>
@/Users/chris/.claude/get-shit-done/workflows/execute-plan.md
@/Users/chris/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/05-core-components-advanced/05-RESEARCH.md
@.planning/phases/05-core-components-advanced/05-CONTEXT.md
@.planning/phases/05-core-components-advanced/05-01-SUMMARY.md

Reference existing patterns:
@packages/ui/src/components/dialog.tsx (compound component template)
@packages/ui/src/components/dropdown-menu.tsx (just built in Plan 01)
@apps/storybook/stories/Dialog.stories.tsx (story template)
@packages/ui/src/components/button.figma.tsx (figma connect template)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Implement Tabs compound component with story and Figma mapping</name>
  <files>
    packages/ui/src/components/tabs.tsx
    packages/ui/src/components/tabs.figma.tsx
    apps/storybook/stories/Tabs.stories.tsx
  </files>
  <action>
  **tabs.tsx** — Radix compound component following Dialog pattern:

1. Import `* as TabsPrimitive from '@radix-ui/react-tabs'` and `cn` from `../lib/utils`
2. Direct re-export: `Tabs` (Root)
3. Styled parts with `React.forwardRef`:

**TabsList** — Container for tab triggers:

- `inline-flex h-10 items-center justify-center border-b border-border`
- This creates the underline-style tab bar (decision: underline style, not pill/card)

**TabsTrigger** — Individual tab button:

- `inline-flex items-center justify-center whitespace-nowrap px-3 py-1.5 text-sm font-medium ring-offset-background transition-all`
- `focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2`
- Active state: `data-[state=active]:text-foreground data-[state=active]:border-b-2 data-[state=active]:border-primary`
- Inactive: `text-muted-foreground`
- Disabled: `disabled:pointer-events-none disabled:opacity-50`

**TabsContent** — Tab panel:

- `mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2`
- Do NOT add `forceMount` — let Radix unmount hidden content (decision: unmount when hidden)

4. Set `displayName` on all forwardRef components
5. Export: `Tabs, TabsList, TabsTrigger, TabsContent`

**Tabs.stories.tsx** — CSF 3.0:

- `title: 'Components/Tabs'`, `component: Tabs`, subcomponents, `tags: ['autodocs']`
- `parameters: { layout: 'centered' }`
- **Default story:** 3 tabs (Account, Password, Settings) with simple text content in each panel
- **WithDisabled story:** 3 tabs where one is disabled (`disabled` prop on TabsTrigger)
- **FullWidth story:** Tabs with `className="w-[400px]"` and TabsList with `className="w-full grid grid-cols-3"` showing full-width tab bar

**tabs.figma.tsx** — Placeholder Code Connect:

- Props: `defaultValue: figma.string('Default Tab')`
- Example: Tabs with 2 triggers and content panels

IMPORTANT: Underline style only (no rounded pill variant). Semantic tokens only.
</action>
<verify>

```bash
cd /Users/chris/Repos/phoenix && pnpm turbo run typecheck --filter=@phoenix/ui
```

  </verify>
  <done>
  - tabs.tsx exports Tabs, TabsList, TabsTrigger, TabsContent
  - Active tab shows bottom border indicator (underline style)
  - Hidden tab content unmounts (no forceMount)
  - Disabled TabsTrigger is visually muted
  - 3 Storybook stories demonstrating basic, disabled, and full-width usage
  </done>
</task>

<task type="auto">
  <name>Task 2: Implement Tooltip and Toast components with stories and Figma mappings</name>
  <files>
    packages/ui/src/components/tooltip.tsx
    packages/ui/src/components/tooltip.figma.tsx
    apps/storybook/stories/Tooltip.stories.tsx
    packages/ui/src/components/toast.tsx
    packages/ui/src/components/toast.figma.tsx
    apps/storybook/stories/Toast.stories.tsx
  </files>
  <action>
  **tooltip.tsx** — Radix compound component:

1. Import `* as TooltipPrimitive from '@radix-ui/react-tooltip'` and `cn`
2. Direct re-exports: `TooltipProvider` (re-export from Radix), `Tooltip` (Root), `TooltipTrigger`
3. Styled parts:

**TooltipContent** — Portal-wrapped tooltip bubble:

- Wrap in `<TooltipPrimitive.Portal>`
- Style: `z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md`
- Animation: `animate-in fade-in-0 zoom-in-95` plus side-aware slide animations (`data-[side=bottom]:slide-in-from-top-2` etc.)
- Default `sideOffset={4}`

4. Set displayName, export: `Tooltip, TooltipTrigger, TooltipContent, TooltipProvider`

**Tooltip.stories.tsx** — CSF 3.0:

- `title: 'Components/Tooltip'`, `tags: ['autodocs']`
- Wrap ALL stories in `<TooltipProvider delayDuration={0}>` decorator (instant for Storybook testing — no hover delay in docs)
- **Default story:** Button with tooltip "Add to library"
- **WithArrow story:** Tooltip with content showing it works on icon buttons (use Button variant="outline" size="icon" with inline SVG)
- **Positions story:** 4 tooltips showing `side="top"`, `side="right"`, `side="bottom"`, `side="left"`

**tooltip.figma.tsx** — Placeholder:

- Props: `content: figma.string('Tooltip Text')`, `side: figma.enum('Side', { Top: 'top', Right: 'right', Bottom: 'bottom', Left: 'left' })`
- Example: Tooltip wrapping a Button

**toast.tsx** — Sonner wrapper (NOT a Radix primitive):

1. Import `{ Toaster as Sonner, type ToasterProps as SonnerProps }` from `'sonner'`
2. Create `Toaster` component that wraps Sonner with semantic token classNames:

```typescript
type ToasterProps = React.ComponentProps<typeof Sonner>

const Toaster = ({ ...props }: ToasterProps) => {
  return (
    <Sonner
      className="toaster group"
      toastOptions={{
        classNames: {
          toast:
            'group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg',
          description: 'group-[.toast]:text-muted-foreground',
          actionButton:
            'group-[.toast]:bg-primary group-[.toast]:text-primary-foreground',
          cancelButton:
            'group-[.toast]:bg-muted group-[.toast]:text-muted-foreground',
        },
      }}
      {...props}
    />
  )
}
```

3. Export `{ Toaster }` — consumers use `toast()` from 'sonner' directly for triggering

IMPORTANT: Do NOT re-export `toast` from sonner. The `Toaster` component is the only thing in our UI library. App code imports `{ toast }` directly from `'sonner'` to trigger notifications. This avoids unnecessary wrapping.

**Toast.stories.tsx** — CSF 3.0:

- `title: 'Components/Toast'`, `tags: ['autodocs']`
- Import `{ toast }` from `'sonner'` and `{ Toaster, Button }` from `'@phoenix/ui'`
- Include `<Toaster />` in each story's render
- **Default story:** Button that calls `toast('Event created')` on click
- **Variants story:** 5 buttons showing `toast.success()`, `toast.error()`, `toast.warning()`, `toast.info()`, `toast.loading()`
- **WithAction story:** Button that calls `toast.error('Failed to save', { action: { label: 'Retry', onClick: () => toast.success('Retried!') } })`
- **WithDescription story:** Button that calls `toast('Event created', { description: 'Monday, January 3rd at 6:00pm' })`

**toast.figma.tsx** — Placeholder:

- Connect Toaster component with placeholder URL
- Props: `position: figma.enum('Position', { 'Bottom Right': 'bottom-right', 'Top Right': 'top-right' })`
- Example: `<Toaster position={props.position} />`
  </action>
  <verify>

```bash
cd /Users/chris/Repos/phoenix && pnpm turbo run typecheck --filter=@phoenix/ui
```

Verify all component files exist:

```bash
ls packages/ui/src/components/{tooltip,toast,tabs}.tsx packages/ui/src/components/{tooltip,toast,tabs}.figma.tsx apps/storybook/stories/{Tooltip,Toast,Tabs}.stories.tsx
```

  </verify>
  <done>
  - tooltip.tsx exports Tooltip, TooltipTrigger, TooltipContent, TooltipProvider
  - toast.tsx exports Toaster (Sonner wrapper with semantic token styling)
  - tabs.tsx exports verified from Task 1
  - 3 story files created (Tabs, Tooltip, Toast) with multiple variants each
  - 3 figma.tsx placeholder files created
  - All semantic token classes, no hardcoded colors
  - TypeScript compiles without errors
  </done>
</task>

</tasks>

<verification>
1. `pnpm turbo run typecheck --filter=@phoenix/ui` passes
2. tabs.tsx, tooltip.tsx, toast.tsx all exist and export correct parts
3. No hardcoded color values in any new component file
4. Story files import from '@phoenix/ui' (not relative paths)
5. Toast story uses `{ toast }` from 'sonner' (not from @phoenix/ui)
6. TooltipContent renders inside Portal
7. TabsContent does NOT use forceMount
</verification>

<success_criteria>

- Tabs component with underline-style active indicator, disabled support, unmount-when-hidden
- Tooltip component with TooltipProvider export, portal rendering, side-aware animations
- Toast component wrapping Sonner with semantic token styling for design system consistency
- 3 Storybook story files with total 10+ story variants
- 3 Figma Code Connect placeholder files
- Zero TypeScript errors
  </success_criteria>

<output>
After completion, create `.planning/phases/05-core-components-advanced/05-02-SUMMARY.md`
</output>
