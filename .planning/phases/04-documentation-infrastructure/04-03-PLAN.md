---
phase: 04-documentation-infrastructure
plan: 03
type: execute
wave: 2
depends_on: ['04-01']
files_modified:
  - figma.config.json
  - packages/ui/src/components/button.figma.tsx
  - packages/ui/src/components/input.figma.tsx
  - packages/ui/src/components/textarea.figma.tsx
  - packages/ui/src/components/select.figma.tsx
  - packages/ui/src/components/checkbox.figma.tsx
  - packages/ui/src/components/radio-group.figma.tsx
  - packages/ui/src/components/dialog.figma.tsx
  - packages/ui/eslint.config.mjs
  - README.md
autonomous: true

must_haves:
  truths:
    - 'figma.config.json exists at repo root with correct include glob for .figma.tsx files'
    - 'Each of the 7 components has a co-located .figma.tsx placeholder file'
    - 'ESLint ignores .figma.tsx files to prevent false errors'
    - 'README.md at repo root documents project structure, conventions, getting started, and scope rename'
  artifacts:
    - path: 'figma.config.json'
      provides: 'Figma Code Connect root configuration'
      contains: 'codeConnect'
    - path: 'packages/ui/src/components/button.figma.tsx'
      provides: 'Button Code Connect placeholder mapping'
      contains: 'figma.connect'
    - path: 'packages/ui/src/components/input.figma.tsx'
      provides: 'Input Code Connect placeholder mapping'
      contains: 'figma.connect'
    - path: 'packages/ui/src/components/textarea.figma.tsx'
      provides: 'Textarea Code Connect placeholder mapping'
      contains: 'figma.connect'
    - path: 'packages/ui/src/components/select.figma.tsx'
      provides: 'Select Code Connect placeholder mapping'
      contains: 'figma.connect'
    - path: 'packages/ui/src/components/checkbox.figma.tsx'
      provides: 'Checkbox Code Connect placeholder mapping'
      contains: 'figma.connect'
    - path: 'packages/ui/src/components/radio-group.figma.tsx'
      provides: 'RadioGroup Code Connect placeholder mapping'
      contains: 'figma.connect'
    - path: 'packages/ui/src/components/dialog.figma.tsx'
      provides: 'Dialog Code Connect placeholder mapping'
      contains: 'figma.connect'
    - path: 'README.md'
      provides: 'Root documentation with setup, conventions, architecture'
      contains: 'Getting Started'
  key_links:
    - from: 'figma.config.json'
      to: 'packages/ui/src/components/*.figma.tsx'
      via: 'include glob pattern'
      pattern: "packages/ui/src/components/\\*\\*/\\*.figma.tsx"
    - from: 'packages/ui/src/components/*.figma.tsx'
      to: 'packages/ui/src/components/*.tsx'
      via: 'relative import of component'
      pattern: "from '\\./button'"
---

<objective>
Scaffold Figma Code Connect configuration with placeholder mapping files for all 7 components, and create a comprehensive root README.md optimized for AI agent comprehension.

Purpose: Establishes Figma integration infrastructure ready for when a Figma file is created, and provides the primary onboarding document for both AI agents and human developers.
Output: figma.config.json + 7 .figma.tsx files + README.md at repo root.
</objective>

<execution_context>
@/Users/chris/.claude/get-shit-done/workflows/execute-plan.md
@/Users/chris/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/STATE.md
@.planning/phases/04-documentation-infrastructure/04-RESEARCH.md
@.planning/phases/04-documentation-infrastructure/04-01-SUMMARY.md

Key source files:

- packages/ui/src/components/button.tsx (variants, sizes, asChild)
- packages/ui/src/components/input.tsx (forwarded ref, standard props)
- packages/ui/src/components/textarea.tsx (autoResize prop)
- packages/ui/src/components/select.tsx (10 compound parts)
- packages/ui/src/components/checkbox.tsx (Radix primitive)
- packages/ui/src/components/radio-group.tsx (RadioGroup + RadioGroupItem)
- packages/ui/src/components/dialog.tsx (10 compound parts)
- packages/ui/eslint.config.mjs (existing ESLint config to update)
- scripts/rename-scope.mjs (exists from Phase 1)
  </context>

<tasks>

<task type="auto">
  <name>Task 1: Scaffold Figma Code Connect configuration and placeholder mappings</name>
  <files>
    figma.config.json
    packages/ui/src/components/button.figma.tsx
    packages/ui/src/components/input.figma.tsx
    packages/ui/src/components/textarea.figma.tsx
    packages/ui/src/components/select.figma.tsx
    packages/ui/src/components/checkbox.figma.tsx
    packages/ui/src/components/radio-group.figma.tsx
    packages/ui/src/components/dialog.figma.tsx
    packages/ui/eslint.config.mjs
  </files>
  <action>
    1. Install @figma/code-connect as devDependency in packages/ui:
       `pnpm --filter @phoenix/ui add -D @figma/code-connect`

    2. Create figma.config.json at repo root:
       ```json
       {
         "codeConnect": {
           "include": ["packages/ui/src/components/**/*.figma.tsx"],
           "parser": "react",
           "label": "React"
         },
         "documentUrlSubstitutions": {}
       }
       ```

    3. Create .figma.tsx files co-located with each component. Read each component source file first to map the correct props.

    **button.figma.tsx:** Map variant (enum: Default/Destructive/Outline/Secondary/Ghost/Link), size (enum: Default/Small/Large/Icon), disabled (boolean), children (string). Import Button from './button'.

    **input.figma.tsx:** Map type (enum: Text/Email/Password/Number), placeholder (string), disabled (boolean). Import Input from './input'.

    **textarea.figma.tsx:** Map placeholder (string), autoResize (boolean), disabled (boolean). Import Textarea from './textarea'.

    **select.figma.tsx:** Map disabled (boolean). Example shows fully assembled Select with Trigger, Content, and Items. Import Select, SelectTrigger, SelectValue, SelectContent, SelectItem from './select'.

    **checkbox.figma.tsx:** Map checked (boolean), disabled (boolean). Wrap with Label in example. Import Checkbox from './checkbox'.

    **radio-group.figma.tsx:** Map disabled (boolean). Example shows RadioGroup with 3 RadioGroupItems + Labels. Import RadioGroup, RadioGroupItem from './radio-group'.

    **dialog.figma.tsx:** Map open state concept. Example shows full Dialog with Trigger, Content, Header, Title, Description, Footer. Import Dialog, DialogTrigger, DialogContent, DialogHeader, DialogTitle, DialogDescription, DialogFooter from './dialog'.

    Every .figma.tsx file must:
    - Import figma from '@figma/code-connect'
    - Use placeholder Figma URL: 'https://www.figma.com/design/FIGMA_FILE_KEY?node-id=NODE_ID'
    - Include a comment: "Placeholder - update URL when Figma file is created"
    - Use figma.connect() with props mapping and example JSX

    4. Update packages/ui/eslint.config.mjs to ignore *.figma.tsx files (Pitfall 9 from research). Read the existing config first, then add an ignores entry for '**/*.figma.tsx'.

  </action>
  <verify>
    - figma.config.json exists at repo root with correct structure
    - 7 .figma.tsx files exist alongside their component files in packages/ui/src/components/
    - Each .figma.tsx file contains figma.connect() call with placeholder URL
    - ESLint config ignores .figma.tsx files: `pnpm --filter @phoenix/ui lint` passes without errors from figma files
  </verify>
  <done>
    Figma Code Connect fully scaffolded: root config + 7 placeholder mapping files. ESLint ignores .figma.tsx files. Ready to populate with real Figma URLs when design file is created.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create AI-optimized root README.md</name>
  <files>
    README.md
  </files>
  <action>
    Create README.md at repo root optimized for AI agent comprehension. Follow the structure from RESEARCH.md Pattern 7, but write final content based on actual project state.

    Read these files for accurate content:
    - .planning/PROJECT.md (core value, constraints)
    - .planning/STATE.md (decisions, tech stack specifics)
    - packages/ui/src/index.ts (exact component exports)
    - apps/web/src/index.css (token system details)
    - scripts/rename-scope.mjs (verify it exists for rename instructions)
    - turbo.json (actual task definitions)
    - pnpm-workspace.yaml (workspace structure)

    **Required sections (in order):**

    1. **Title + one-liner** - "Phoenix Design System" + brief description
    2. **Overview** - What Phoenix is, 7 components listed, key features. Note: "This README is optimized for AI agents (Claude Code and similar tools)."
    3. **Architecture** - Monorepo structure tree (apps/web, apps/storybook, packages/ui, packages/tokens, scripts/). Technology stack with exact versions. Package dependency graph.
    4. **Key Conventions** - Design tokens (OKLCH, semantic-only, @theme mapping, class-based dark mode). Component patterns (CVA + Radix + cn(), source exports for HMR, compound components). Styling rules (no arbitrary values in packages/ui, semantic tokens only).
    5. **Getting Started** - Prerequisites (Node 22+, pnpm 10+). Installation (clone, pnpm install, pnpm dev). Viewing docs (pnpm storybook or cd apps/storybook && pnpm dev).
    6. **Customization** - Renaming scope (node scripts/rename-scope.mjs @yourscope). Modifying tokens (edit token JSON files, run pnpm build).
    7. **Development Workflow** - Adding a component (4 steps: create component, export from barrel, add story, add figma mapping). Running tasks (pnpm dev, pnpm build, pnpm lint, pnpm typecheck, pnpm format).
    8. **Components** - Text-only listing of all 7 components with brief descriptions. Link to Storybook.
    9. **Prior Decisions** - React 18.3.0 pinning reason. Tailwind CSS 4. Class-based dark mode. OKLCH color format. ESLint + Prettier over Biome.
    10. **License** - MIT

    Do NOT include:
    - Emojis
    - Embedded screenshots or images
    - Per-package READMEs
    - AGENTS.md (deferred to Phase 6)
    - Badges or shields

  </action>
  <verify>
    - README.md exists at repo root
    - Contains all 10 required sections
    - Documents scope rename via script (not manual steps)
    - Lists all 7 components
    - Includes technology stack with version numbers
    - No emojis, no images, no badges
  </verify>
  <done>
    README.md at repo root provides comprehensive project documentation optimized for AI agents. Includes architecture, conventions, getting started, customization with scope rename, development workflow, component listing, and prior decisions.
  </done>
</task>

</tasks>

<verification>
1. figma.config.json at repo root with codeConnect.include pointing to *.figma.tsx
2. 7 .figma.tsx files in packages/ui/src/components/ (one per component)
3. Each .figma.tsx file has placeholder Figma URL and correct prop mappings
4. `pnpm --filter @phoenix/ui lint` passes (ESLint ignores .figma.tsx)
5. README.md at repo root with all required sections
6. README documents scope rename via script, not manual steps
</verification>

<success_criteria>

- DOCS-04 fully satisfied (Figma Code Connect scaffolded for all 7 components)
- DOCS-05 fully satisfied (README with clone, rename, workflow instructions)
- All .figma.tsx files co-located with components
- ESLint clean across packages/ui
- README readable by both AI agents and humans
  </success_criteria>

<output>
After completion, create `.planning/phases/04-documentation-infrastructure/04-03-SUMMARY.md`
</output>
