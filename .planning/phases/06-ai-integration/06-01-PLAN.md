---
phase: 06-ai-integration
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - CLAUDE.md
  - AGENTS.md
autonomous: true

must_haves:
  truths:
    - 'CLAUDE.md at repo root provides full project overview, directory tree, development commands, and pitfalls'
    - 'CLAUDE.md points to .claude/rules/ for domain-specific patterns (progressive disclosure)'
    - 'AGENTS.md at repo root enables any AI tool to understand and work with the project'
    - 'AGENTS.md references CLAUDE.md for detailed patterns instead of duplicating content'
  artifacts:
    - path: 'CLAUDE.md'
      provides: 'Comprehensive Claude Code project reference'
      contains: 'packages/ui'
    - path: 'AGENTS.md'
      provides: 'Cross-tool AI agent documentation'
      contains: '.claude/rules/'
  key_links:
    - from: 'CLAUDE.md'
      to: '.claude/rules/ui-components.md'
      via: 'progressive disclosure reference'
      pattern: 'claude/rules/ui-components'
    - from: 'AGENTS.md'
      to: 'CLAUDE.md'
      via: 'reference for detailed patterns'
      pattern: 'CLAUDE.md'
---

<objective>
Create CLAUDE.md and AGENTS.md at the repo root to enable AI agents to understand and work with the Phoenix design system autonomously.

Purpose: These are the top-level navigation documents that orient any AI agent. CLAUDE.md is the comprehensive reference for Claude Code; AGENTS.md is the cross-tool equivalent for Cursor, Copilot, and other AI tools.

Output: Two markdown files at repo root - CLAUDE.md (~300-500 lines) and AGENTS.md (~150-250 lines).
</objective>

<execution_context>
@/Users/chris/.claude/get-shit-done/workflows/execute-plan.md
@/Users/chris/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/06-ai-integration/06-CONTEXT.md
@.planning/phases/06-ai-integration/06-RESEARCH.md

Reference these files to extract exact patterns, conventions, and project structure:
@README.md
@packages/ui/src/index.ts
@packages/ui/src/components/button.tsx
@packages/ui/src/components/tabs.tsx
@packages/tokens/src/tokens/colors.json
@apps/storybook/stories/Tabs.stories.tsx
@packages/ui/src/components/tabs.figma.tsx
@package.json
@turbo.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create CLAUDE.md at repo root</name>
  <files>CLAUDE.md</files>
  <action>
Create CLAUDE.md at the repo root as the comprehensive Claude Code project reference. This file is loaded automatically when Claude Code starts a session.

Structure the file with these sections (in this order):

1. **Project Overview** (5-10 lines)
   - Phoenix Design System Monorepo Starter
   - Core value: AI agents can add/modify/extend components autonomously
   - React 18.3.0 + Tailwind CSS 4 + Radix UI + CVA + Style Dictionary 5
   - pnpm 10 + Turborepo 2.7

2. **Monorepo Structure** (full directory tree)
   - Show the complete workspace layout:
     ```
     phoenix/
     ├── apps/
     │   ├── web/          # Vite + React Router app
     │   └── storybook/    # Storybook 8.6 documentation
     ├── packages/
     │   ├── ui/           # Component library (@phoenix/ui)
     │   │   └── src/
     │   │       ├── components/  # All component .tsx files
     │   │       ├── lib/         # Utilities (cn())
     │   │       └── index.ts     # Barrel export (60+ named exports)
     │   ├── tokens/       # Design tokens (@phoenix/tokens)
     │   │   └── src/
     │   │       ├── tokens/  # DTCG JSON source files
     │   │       └── build.mjs # Style Dictionary build script
     │   ├── eslint-config/ # Shared ESLint configuration
     │   └── tsconfig/      # Shared TypeScript configuration
     ├── CLAUDE.md          # This file
     ├── AGENTS.md          # Cross-tool AI documentation
     └── .claude/rules/     # Path-scoped rules (loaded conditionally)
     ```

3. **Development Commands** (exact commands with descriptions)
   - `pnpm install` - Install all dependencies
   - `pnpm dev` - Start all dev servers (web: 5173, storybook: 6006)
   - `pnpm build` - Build all packages via Turborepo
   - `pnpm typecheck` - TypeScript check all packages
   - `pnpm lint` - ESLint all packages
   - `pnpm format` - Prettier format
   - `pnpm format:check` - Prettier check (CI)
   - `pnpm storybook` - Start Storybook dev server
   - `cd packages/tokens && pnpm build` - Rebuild tokens after editing
   - Show what to run before committing: `pnpm typecheck && pnpm lint && pnpm format:check`

4. **Component Patterns** (high-level, points to rules for details)
   - All components in `packages/ui/src/components/[name].tsx`
   - Pattern: forwardRef + cn() + semantic tokens + CVA (when variants needed)
   - Compound components export multiple parts from single file
   - Every component needs: `.tsx` + `.figma.tsx` + `.stories.tsx` + barrel export
   - Point to `.claude/rules/ui-components.md` for full component authoring template

5. **Token System** (high-level, points to rules for details)
   - DTCG format JSON in `packages/tokens/src/tokens/`
   - Style Dictionary builds to CSS custom properties
   - Tailwind CSS 4 @theme maps tokens to utilities
   - OKLCH color format throughout
   - Point to `.claude/rules/token-authoring.md` for token editing guide

6. **Storybook** (high-level, points to rules for details)
   - Stories in `apps/storybook/stories/[Name].stories.tsx`
   - CSF 3.0 format with `satisfies Meta<typeof Component>`
   - All stories include `tags: ['autodocs']`
   - Point to `.claude/rules/storybook-stories.md` for story template

7. **Critical Pitfalls** (dedicated section - these MUST be prominent)
   - React pinned to 18.3.0: Radix UI + React 19 causes infinite loop. Do NOT upgrade React.
   - No inline styles: ESLint enforced via `react/forbid-dom-props`. Use Tailwind classes.
   - No arbitrary Tailwind values in packages/ui: Use semantic tokens only (bg-primary, not bg-[#hex]).
   - Style Dictionary async: Build script uses `await sd.buildAllPlatforms()`. Always async.
   - Tailwind CSS 4 @theme: Uses CSS-based config, NOT tailwind.config.js. Theme in `@theme` directive.
   - Source exports for HMR: packages use `main: "src/index.ts"`, not dist builds.
   - eslint-plugin-tailwindcss removed: Incompatible with Tailwind CSS 4. Do NOT add it back.
   - Storybook duplicate CSS: `apps/storybook/stories/index.css` must mirror `apps/web/src/index.css` @theme section.

8. **Naming Conventions**
   - Component files: lowercase kebab-case (`dropdown-menu.tsx`)
   - Component exports: PascalCase (`DropdownMenu`)
   - Story files: PascalCase (`DropdownMenu.stories.tsx`)
   - Figma files: kebab-case with .figma suffix (`dropdown-menu.figma.tsx`)
   - Token files: kebab-case JSON (`colors.json`, `colors.dark.json`)
   - Package scope: `@phoenix/` (configurable via rename script)

9. **Key Architectural Decisions**
   - CVA for variant management (not custom prop logic)
   - Radix UI primitives for accessibility (focus trap, ARIA, keyboard nav)
   - Semantic tokens only in components (automatic dark mode)
   - Class-based dark mode (.dark class on html)
   - Compound component pattern for complex UI (Dialog, Select, Tabs, etc.)

Keep total file under 500 lines. Use concise formatting - bullet points, code blocks, tables where appropriate. No prose paragraphs where lists suffice.
</action>
<verify> - File exists: `test -f CLAUDE.md && echo "exists"` - Contains key sections: `grep -c "## " CLAUDE.md` returns 8+ - Under 500 lines: `wc -l CLAUDE.md` shows < 500 - References rules: `grep "claude/rules" CLAUDE.md` returns matches - Contains pitfalls: `grep -i "pitfall\|warning\|caution" CLAUDE.md` returns matches - Contains commands: `grep "pnpm" CLAUDE.md` returns matches
</verify>
<done>CLAUDE.md exists at repo root with project overview, directory tree, development commands, component/token/storybook high-level patterns (pointing to rules for details), critical pitfalls section, naming conventions, and architectural decisions. File is under 500 lines.</done>
</task>

<task type="auto">
  <name>Task 2: Create AGENTS.md at repo root</name>
  <files>AGENTS.md</files>
  <action>
Create AGENTS.md at the repo root as a cross-tool AI agent reference. This follows the Linux Foundation standard adopted by 60,000+ repos.

AGENTS.md must be STANDALONE - any AI tool (Cursor, Copilot, Windsurf, etc.) can use it without Claude-specific features like path-scoped rules.

Structure the file with these sections:

1. **Project Overview**
   - Phoenix Design System Monorepo Starter
   - 13 components built on Radix UI primitives
   - Design token system using Style Dictionary (DTCG format)
   - Tailwind CSS 4 with semantic tokens only
   - Component documentation in Storybook

2. **Tech Stack** (exact versions)
   - React 18.3.0 (pinned - see Constraints)
   - TypeScript 5.x
   - Tailwind CSS 4
   - Radix UI primitives
   - CVA 0.7 for variants
   - Style Dictionary 5.x
   - pnpm 10 + Turborepo 2.7
   - Storybook 8.6

3. **Monorepo Structure** (simplified tree)

4. **Development Commands** (same as CLAUDE.md)

5. **Code Patterns** (concise summaries)
   - Component pattern (forwardRef + cn + semantic tokens + CVA)
   - Story pattern (CSF 3.0 + satisfies Meta + autodocs)
   - Token pattern (DTCG JSON + OKLCH colors)
   - Reference CLAUDE.md and .claude/rules/ for comprehensive patterns

6. **Adding a New Component** (step-by-step checklist)
   - Install Radix primitive if needed
   - Create `packages/ui/src/components/[name].tsx`
   - Create `packages/ui/src/components/[name].figma.tsx`
   - Create `apps/storybook/stories/[Name].stories.tsx`
   - Update `packages/ui/src/index.ts` barrel export
   - Run `pnpm typecheck` to verify

7. **Critical Constraints**
   - React 18.3.0 pinned (Radix + React 19 bug)
   - No inline styles (ESLint enforced)
   - No arbitrary Tailwind values in packages/ui
   - All components must use forwardRef
   - All components need .figma.tsx mapping file
   - Semantic tokens only (bg-primary, not bg-[#hex])

8. **Tool-Specific Configuration**
   - Claude Code: See `CLAUDE.md` and `.claude/rules/` for path-scoped rules
   - Cursor: `.claude/rules/` files contain domain-specific patterns (can be mapped to `.cursor/rules/*.mdc`)
   - GitHub Copilot: Core patterns in this file; detailed patterns in `CLAUDE.md`

Keep total file under 250 lines. Standalone and tool-agnostic.
</action>
<verify> - File exists: `test -f AGENTS.md && echo "exists"` - Under 250 lines: `wc -l AGENTS.md` shows < 250 - Contains tool sections: `grep -i "cursor\|copilot\|claude" AGENTS.md` returns matches - References CLAUDE.md: `grep "CLAUDE.md" AGENTS.md` returns matches - Contains constraints: `grep "React 18" AGENTS.md` returns matches - Standalone: Does NOT use Claude-specific syntax (no path-scoped YAML frontmatter)
</verify>
<done>AGENTS.md exists at repo root as a standalone cross-tool AI agent reference with project overview, tech stack, structure, commands, code patterns, component checklist, constraints, and tool-specific configuration sections. Under 250 lines.</done>
</task>

</tasks>

<verification>
1. `test -f CLAUDE.md && test -f AGENTS.md && echo "Both files exist"`
2. `wc -l CLAUDE.md AGENTS.md` - CLAUDE.md < 500 lines, AGENTS.md < 250 lines
3. `grep "claude/rules" CLAUDE.md` - CLAUDE.md references path-scoped rules
4. `grep "CLAUDE.md" AGENTS.md` - AGENTS.md references CLAUDE.md
5. `grep "React 18" CLAUDE.md AGENTS.md` - Both document React version constraint
6. `grep "pnpm" CLAUDE.md AGENTS.md` - Both contain development commands
</verification>

<success_criteria>

- CLAUDE.md at repo root is a comprehensive Claude Code reference under 500 lines
- AGENTS.md at repo root is a standalone cross-tool reference under 250 lines
- Both files document project structure, development commands, and critical constraints
- CLAUDE.md uses progressive disclosure pattern (points to .claude/rules/ for details)
- AGENTS.md is tool-agnostic and references CLAUDE.md for detailed patterns
- Requirements AIML-01 and AIML-05 satisfied
  </success_criteria>

<output>
After completion, create `.planning/phases/06-ai-integration/06-01-SUMMARY.md`
</output>
