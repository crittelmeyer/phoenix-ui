---
phase: 01-foundation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - package.json
  - pnpm-workspace.yaml
  - .npmrc
  - turbo.json
  - .gitignore
  - .prettierrc.json
  - .prettierignore
  - commitlint.config.mjs
  - packages/typescript-config/package.json
  - packages/typescript-config/base.json
  - packages/typescript-config/react.json
  - packages/eslint-config/package.json
  - packages/eslint-config/base.mjs
  - packages/eslint-config/react.mjs
  - packages/ui/package.json
  - packages/ui/src/index.ts
  - packages/ui/tsconfig.json
  - packages/ui/eslint.config.mjs
  - packages/tokens/package.json
  - packages/tokens/src/index.ts
  - packages/tokens/tsconfig.json
  - packages/tokens/eslint.config.mjs
  - apps/storybook/package.json
  - apps/storybook/tsconfig.json
autonomous: true

must_haves:
  truths:
    - "pnpm install succeeds with zero errors in a fresh clone"
    - "Turborepo recognizes all 5 workspace packages (web, storybook, ui, tokens, eslint-config, typescript-config)"
    - "TypeScript strict mode is shared across all packages via @phoenix/typescript-config"
    - "ESLint config is shareable via @phoenix/eslint-config with React + Tailwind rules"
    - "Prettier formats with no semicolons, single quotes, trailing commas, sorted imports, sorted Tailwind classes"
  artifacts:
    - path: "package.json"
      provides: "Root monorepo config with pnpm.overrides for React 18.3.0"
      contains: "pnpm"
    - path: "pnpm-workspace.yaml"
      provides: "Workspace package discovery"
      contains: "packages"
    - path: "turbo.json"
      provides: "Task orchestration with dependency ordering"
      contains: "dependsOn"
    - path: "packages/typescript-config/base.json"
      provides: "Shared strict TypeScript config"
      contains: "strict"
    - path: "packages/eslint-config/react.mjs"
      provides: "Shared ESLint config with Tailwind rules"
      contains: "no-arbitrary-value"
  key_links:
    - from: "packages/ui/tsconfig.json"
      to: "@phoenix/typescript-config/react.json"
      via: "extends field"
      pattern: "extends.*@phoenix/typescript-config"
    - from: "packages/ui/eslint.config.mjs"
      to: "@phoenix/eslint-config/react.mjs"
      via: "import"
      pattern: "import.*@phoenix/eslint-config"
---

<objective>
Scaffold the complete monorepo skeleton: root configuration, shared tooling packages, and stub workspace packages.

Purpose: Establish the workspace structure so that all subsequent plans can install dependencies, run Turborepo tasks, and extend shared configs. This is the foundation everything else builds on.

Output: A working pnpm monorepo with Turborepo orchestration, shared TypeScript and ESLint configs, Prettier configuration, and stub packages for ui, tokens, and storybook.
</objective>

<execution_context>
@/Users/chris/.claude/get-shit-done/workflows/execute-plan.md
@/Users/chris/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation/01-RESEARCH.md
@.planning/phases/01-foundation/01-CONTEXT.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create root monorepo configuration and shared tooling packages</name>
  <files>
    package.json
    pnpm-workspace.yaml
    .npmrc
    turbo.json
    .gitignore
    .prettierrc.json
    .prettierignore
    commitlint.config.mjs
    packages/typescript-config/package.json
    packages/typescript-config/base.json
    packages/typescript-config/react.json
    packages/eslint-config/package.json
    packages/eslint-config/base.mjs
    packages/eslint-config/react.mjs
  </files>
  <action>
    Create the root monorepo configuration files:

    **package.json (root):**
    - name: "phoenix", version: "0.0.0", private: true
    - engines: { node: ">=22.0.0", pnpm: ">=10.0.0" }
    - scripts: dev, build, lint, typecheck, format, format:check, prepare (husky)
    - devDependencies: turbo ^2.7.0, prettier ^3.8.0, prettier-plugin-tailwindcss ^0.6.0, @ianvs/prettier-plugin-sort-imports ^4.4.0, husky ^9.0.0, lint-staged ^16.1.0, @commitlint/cli ^19.0.0, @commitlint/config-conventional ^19.0.0
    - pnpm.overrides: react 18.3.0, react-dom 18.3.0, @types/react ^18.3.0, @types/react-dom ^18.3.0
    - lint-staged config: *.{js,jsx,ts,tsx} -> eslint --fix + prettier --write; *.{json,md,mdx,css} -> prettier --write
    - packageManager field: "pnpm@10.0.0" (enables corepack)
    - license: "MIT"

    **pnpm-workspace.yaml:**
    - packages: ["apps/*", "packages/*"]
    - NO nested globs (Turborepo doesn't support them)

    **.npmrc:**
    - engine-strict=true
    - auto-install-peers=true
    - public-hoist-pattern[]=@types/react
    - public-hoist-pattern[]=@types/react-dom

    **turbo.json:**
    - $schema: https://turborepo.dev/schema.json
    - globalDependencies: ["!**/.env*"]
    - tasks: build (dependsOn: ["^build"], outputs: ["dist/**"]), dev (cache: false, persistent: true), lint (dependsOn: ["^build"]), typecheck (dependsOn: ["^build"]), format:check (cache: false)

    **.gitignore:**
    - node_modules, dist, .turbo, .env*, .DS_Store, *.tsbuildinfo, coverage

    **.prettierrc.json:**
    - semi: false, singleQuote: true, trailingComma: "all", tabWidth: 2, printWidth: 80
    - plugins: ["@ianvs/prettier-plugin-sort-imports", "prettier-plugin-tailwindcss"] (Tailwind MUST be last)
    - importOrder: ["^react$", "<THIRD_PARTY_MODULES>", "^@phoenix/(.*)$", "^[./]"]
    - importOrderSeparation: true, importOrderSortSpecifiers: true

    **.prettierignore:**
    - node_modules, dist, .turbo, pnpm-lock.yaml, coverage

    **commitlint.config.mjs:**
    - export default { extends: ['@commitlint/config-conventional'] }

    **packages/typescript-config/package.json:**
    - name: "@phoenix/typescript-config", version: "0.0.0", private: true
    - files: ["*.json"]

    **packages/typescript-config/base.json:**
    - compilerOptions: strict: true, esModuleInterop: true, skipLibCheck: true, forceConsistentCasingInFileNames: true, moduleResolution: "Bundler", resolveJsonModule: true, isolatedModules: true, noEmit: true, target: "ES2022", module: "ESNext"

    **packages/typescript-config/react.json:**
    - extends: "./base.json"
    - compilerOptions: jsx: "react-jsx", lib: ["ES2023", "DOM", "DOM.Iterable"]

    **packages/eslint-config/package.json:**
    - name: "@phoenix/eslint-config", version: "0.0.0", private: true, type: "module"
    - dependencies: @eslint/js, typescript-eslint, eslint-plugin-react, eslint-plugin-react-hooks, eslint-plugin-tailwindcss, eslint-config-prettier
    - peerDependencies: eslint "^9.0.0", typescript "^5.0.0"

    **packages/eslint-config/base.mjs:**
    - Export flat config with: js.configs.recommended, tseslint.configs.recommended
    - Add eslint-config-prettier LAST to disable conflicting rules

    **packages/eslint-config/react.mjs:**
    - Extend base config
    - Add plugins: react, react-hooks, tailwindcss
    - Settings: react.version: "detect"
    - Rules: react/react-in-jsx-scope: off, tailwindcss/no-arbitrary-value: error, tailwindcss/no-custom-classname: off, tailwindcss/classnames-order: off (Prettier handles sorting), react-hooks rules from recommended
    - Add rule to ban inline styles in JSX: use "react/forbid-dom-props" with forbid: [{ propName: "style", message: "Use Tailwind classes instead of inline styles" }] AND "react/forbid-component-props" with forbid: [{ propName: "style", message: "Use Tailwind classes instead of inline styles" }]
    - eslint-config-prettier LAST
  </action>
  <verify>
    Run: `ls package.json pnpm-workspace.yaml .npmrc turbo.json .gitignore .prettierrc.json commitlint.config.mjs packages/typescript-config/package.json packages/typescript-config/base.json packages/typescript-config/react.json packages/eslint-config/package.json packages/eslint-config/base.mjs packages/eslint-config/react.mjs`
    All files exist.
  </verify>
  <done>
    Root monorepo config files and shared tooling packages (@phoenix/typescript-config, @phoenix/eslint-config) exist with correct content. React 18.3.0 pinned via pnpm.overrides. Prettier configured with Tailwind plugin last. ESLint config includes no-arbitrary-value (error) and no-inline-styles rules.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create stub workspace packages (ui, tokens, storybook)</name>
  <files>
    packages/ui/package.json
    packages/ui/src/index.ts
    packages/ui/tsconfig.json
    packages/ui/eslint.config.mjs
    packages/tokens/package.json
    packages/tokens/src/index.ts
    packages/tokens/tsconfig.json
    packages/tokens/eslint.config.mjs
    apps/storybook/package.json
    apps/storybook/tsconfig.json
  </files>
  <action>
    Create minimal stub packages so Turborepo recognizes all workspaces and dependency ordering works.

    **packages/ui/package.json:**
    - name: "@phoenix/ui", version: "0.0.0", private: true, type: "module"
    - main: "src/index.ts" (source exports for HMR during development, per research recommendation)
    - types: "src/index.ts"
    - scripts: lint: "eslint .", typecheck: "tsc --noEmit", build: "echo 'No build step yet'"
    - dependencies: @phoenix/tokens: "workspace:*"
    - devDependencies: @phoenix/typescript-config: "workspace:*", @phoenix/eslint-config: "workspace:*", eslint, typescript, react, react-dom, @types/react, @types/react-dom

    **packages/ui/src/index.ts:**
    - Export empty object: `export {}`
    - Comment: "// Components will be exported here in Phase 3"

    **packages/ui/tsconfig.json:**
    - extends: "@phoenix/typescript-config/react.json"
    - compilerOptions: composite: true, baseUrl: ".", paths: { "@/*": ["./src/*"] }
    - include: ["src"]

    **packages/ui/eslint.config.mjs:**
    - Import and re-export @phoenix/eslint-config/react.mjs
    - Keep no-arbitrary-value as ERROR (default from shared config)
    - Keep inline style ban as ERROR (default from shared config)

    **packages/tokens/package.json:**
    - name: "@phoenix/tokens", version: "0.0.0", private: true, type: "module"
    - main: "src/index.ts", types: "src/index.ts"
    - scripts: lint: "eslint .", typecheck: "tsc --noEmit", build: "echo 'No build step yet'"
    - devDependencies: @phoenix/typescript-config: "workspace:*", @phoenix/eslint-config: "workspace:*", eslint, typescript

    **packages/tokens/src/index.ts:**
    - Export empty object: `export {}`
    - Comment: "// Token exports will be added in Phase 2"

    **packages/tokens/tsconfig.json:**
    - extends: "@phoenix/typescript-config/base.json"
    - compilerOptions: composite: true
    - include: ["src"]

    **packages/tokens/eslint.config.mjs:**
    - Import and re-export @phoenix/eslint-config/base.mjs

    **apps/storybook/package.json:**
    - name: "@phoenix/storybook", version: "0.0.0", private: true
    - scripts: placeholder dev and build scripts (echo commands)
    - devDependencies: @phoenix/typescript-config: "workspace:*"

    **apps/storybook/tsconfig.json:**
    - extends: "@phoenix/typescript-config/react.json"
    - include: ["src"] (or empty, just needs to extend base)

    After creating all files, run `pnpm install` from root to validate workspace resolution and generate lockfile.
  </action>
  <verify>
    Run from project root:
    1. `pnpm install` completes without errors
    2. `pnpm ls --depth 0 -r` shows all 6 workspace packages
    3. `pnpm turbo run build --dry-run` shows correct task ordering (tokens before ui before apps)
  </verify>
  <done>
    All workspace packages exist with correct internal dependency references. pnpm install succeeds. Turborepo recognizes all packages and resolves build order correctly (tokens -> ui -> apps). React 18.3.0 is the resolved version across all packages.
  </done>
</task>

</tasks>

<verification>
1. `pnpm install` succeeds with no errors
2. `pnpm ls -r --depth 0` lists all 6 workspace packages
3. `pnpm turbo run build --dry-run` shows tokens before ui before web/storybook
4. `cat packages/ui/tsconfig.json | grep "@phoenix/typescript-config"` confirms shared config usage
5. `cat packages/eslint-config/react.mjs | grep "no-arbitrary-value"` confirms Tailwind lint rule
6. `cat .prettierrc.json | grep "prettier-plugin-tailwindcss"` confirms Tailwind plugin is last
</verification>

<success_criteria>
- pnpm install succeeds in fresh clone
- Turborepo recognizes all workspace packages
- Shared TypeScript config extends correctly
- Shared ESLint config exports correctly
- Prettier configured with import sorting + Tailwind class sorting
- React 18.3.0 pinned via pnpm.overrides
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation/01-01-SUMMARY.md`
</output>
