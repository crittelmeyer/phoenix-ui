/**
 * Color Comparison HTML Format
 *
 * Generates an HTML report showing OKLCH vs RGB side-by-side comparison.
 *
 * Visual verification of color conversion accuracy from OKLCH (source format)
 * to RGB/Hex (Figma-compatible format). Displays both color values and
 * visual swatches for easy comparison.
 *
 * Useful for:
 * - Verifying OKLCH-to-RGB conversion accuracy
 * - Debugging color appearance differences
 * - Design review of token color values
 *
 * @param {Object} params - Style Dictionary format API params
 * @param {Object} params.dictionary - Token dictionary with allTokens array
 * @returns {string} HTML document with color comparison table
 */
export const colorComparisonFormat = ({ dictionary }) => {
  const colorTokens = dictionary.allTokens.filter((t) => t.$type === 'color')

  const rows = colorTokens
    .map(
      (token) => `
    <tr>
      <td><code>${token.path.join('.')}</code></td>
      <td><code>${token.original.$value}</code></td>
      <td style="background: ${token.original.$value}; width: 60px; height: 30px;"></td>
      <td><code>${token.$value ?? token.value}</code></td>
      <td style="background: ${token.$value ?? token.value}; width: 60px; height: 30px;"></td>
    </tr>
  `,
    )
    .join('')

  return `<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Phoenix Token Color Comparison</title>
  <style>
    body { font-family: system-ui, sans-serif; max-width: 1200px; margin: 0 auto; padding: 20px; }
    h1 { color: #1a1a1a; }
    table { border-collapse: collapse; width: 100%; }
    th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
    th { background: #f5f5f5; }
    code { font-family: monospace; font-size: 12px; }
    tr:hover { background: #f9f9f9; }
  </style>
</head>
<body>
  <h1>OKLCH to RGB Color Conversion</h1>
  <p>Visual comparison of source OKLCH colors and converted RGB/Hex values.</p>
  <p><strong>Total color tokens:</strong> ${colorTokens.length}</p>
  <table>
    <thead>
      <tr>
        <th>Token</th>
        <th>OKLCH (Source)</th>
        <th>Preview</th>
        <th>Hex (Converted)</th>
        <th>Preview</th>
      </tr>
    </thead>
    <tbody>
      ${rows}
    </tbody>
  </table>
  <footer style="margin-top: 40px; color: #666; font-size: 12px;">
    Generated by Phoenix Token Pipeline
  </footer>
</body>
</html>`
}
